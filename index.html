<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹é£Ÿå ‚é¢åŒ…åº—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4ECDC4;
            --accent-color: #FFD93D;
            --text-dark: #2C3E50;
            --text-light: #7F8C8D;
            --bg-light: #F8F9FA;
            --bg-white: #FFFFFF;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
            --border-radius: 12px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-dark);
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            background: var(--bg-white);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mode-switcher {
            display: flex;
            background: var(--bg-light);
            border-radius: 25px;
            padding: 5px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* Main Content */
        main {
            flex: 1;
            background: var(--bg-white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            overflow-y: auto;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 250px;
            background: var(--bg-light);
            padding: 20px 0;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .nav-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            font-size: 15px;
            color: var(--text-dark);
        }

        .nav-item:hover {
            background: rgba(255, 107, 107, 0.1);
            padding-left: 25px;
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 0 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .product-description {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-price {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .add-to-cart {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .add-to-cart:hover {
            background: #FF5252;
            transform: scale(1.05);
        }

        .add-to-cart:active {
            transform: scale(0.95);
        }

        /* Cart */
        .cart-container {
            background: var(--bg-light);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
        }

        .cart-item {
            background: var(--bg-white);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .cart-item:hover {
            box-shadow: var(--shadow);
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--text-light);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid var(--primary-color);
            background: var(--bg-white);
            color: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .cart-total {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
        }

        .checkout-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #45B7B8;
            transform: scale(1.05);
        }

        /* Order Form */
        .order-form {
            background: var(--bg-light);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .submit-order-btn {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .submit-order-btn:hover {
            background: #FF5252;
        }

        /* Orders */
        .orders-container {
            margin-top: 20px;
        }

        .order-card {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-color);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-id {
            font-weight: 600;
            color: var(--text-dark);
        }

        .order-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-pending {
            background: #FFF3CD;
            color: #856404;
        }

        .status-processing {
            background: #CCE5FF;
            color: #004085;
        }

        .status-completed {
            background: #D4EDDA;
            color: #155724;
        }

        .status-cancelled {
            background: #F8D7DA;
            color: #721C24;
        }

        .order-items {
            margin-bottom: 10px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }

        .order-total {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .action-btn.primary {
            background: var(--primary-color);
            color: white;
        }

        .action-btn.secondary {
            background: var(--bg-light);
            color: var(--text-dark);
        }

        /* Merchant Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-white);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-light);
        }

        .product-editor {
            background: var(--bg-light);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
        }

        .product-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        /* Payment Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--text-dark);
        }

        .payment-guide {
            text-align: center;
        }

        .payment-steps {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .payment-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .payment-qr {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                padding: 10px;
            }

            header {
                flex-direction: column;
                gap: 15px;
            }

            .sidebar {
                width: 100%;
                display: flex;
                overflow-x: auto;
                padding: 10px 0;
            }

            .nav-item {
                white-space: nowrap;
                padding: 10px 15px;
            }

            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 20px;
            }
        }

        /* Loading and Empty States */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <span>ğŸ¥</span>
                <span>ä¹é£Ÿå ‚é¢åŒ…åº—</span>
            </div>
            <div class="mode-switcher">
                <button class="mode-btn active" onclick="app.switchMode('user')">ç”¨æˆ·ç«¯</button>
                <button class="mode-btn" onclick="app.switchMode('merchant')">å•†å®¶ç«¯</button>
            </div>
        </header>

        <main class="main-content">
            <!-- ç”¨æˆ·ç«¯ -->
            <div id="userMode" class="mode-content">
                <div style="display: flex; gap: 20px;">
                    <!-- ç”¨æˆ·ä¾§è¾¹æ  -->
                    <aside class="sidebar">
                        <button class="nav-item active" onclick="app.showPage('products')">
                            <span>ğŸ›ï¸</span> å•†å“åˆ—è¡¨
                        </button>
                        <button class="nav-item" onclick="app.showPage('cart')">
                            <span>ğŸ›’</span> è´­ç‰©è½¦
                            <span id="cartCount" style="background: var(--primary-color); color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
                        </button>
                        <button class="nav-item" onclick="app.showPage('orders')">
                            <span>ğŸ“‹</span> æˆ‘çš„è®¢å•
                        </button>
                        <button class="nav-item" onclick="app.showPage('profile')">
                            <span>ğŸ‘¤</span> ä¸ªäººä¸­å¿ƒ
                        </button>
                    </aside>

                    <!-- ç”¨æˆ·å†…å®¹åŒº -->
                    <div class="content">
                        <!-- å•†å“é¡µé¢ -->
                        <div id="productsPage" class="page active">
                            <h2>æ–°é²œé¢åŒ…</h2>
                            <div class="product-grid" id="productGrid">
                                <!-- å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- è´­ç‰©è½¦é¡µé¢ -->
                        <div id="cartPage" class="page">
                            <h2>è´­ç‰©è½¦</h2>
                            <div class="cart-container" id="cartContainer">
                                <!-- è´­ç‰©è½¦é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- è®¢å•é¡µé¢ -->
                        <div id="ordersPage" class="page">
                            <h2>æˆ‘çš„è®¢å•</h2>
                            <div class="orders-container" id="ordersContainer">
                                <!-- è®¢å•å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
                        <div id="profilePage" class="page">
                            <h2>ä¸ªäººä¸­å¿ƒ</h2>
                            <div class="order-form">
                                <h3 style="margin-bottom: 20px;">æ”¶è´§åœ°å€</h3>
                                <div class="form-group">
                                    <label>å§“å</label>
                                    <input type="text" id="profileName" placeholder="è¯·è¾“å…¥å§“å">
                                </div>
                                <div class="form-group">
                                    <label>ç”µè¯</label>
                                    <input type="tel" id="profilePhone" placeholder="è¯·è¾“å…¥ç”µè¯">
                                </div>
                                <div class="form-group">
                                    <label>åœ°å€</label>
                                    <textarea id="profileAddress" rows="3" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€"></textarea>
                                </div>
                                <button class="submit-order-btn" onclick="app.saveProfile()">ä¿å­˜ä¿¡æ¯</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å•†å®¶ç«¯ -->
            <div id="merchantMode" class="mode-content" style="display: none;">
                <div style="display: flex; gap: 20px;">
                    <!-- å•†å®¶ä¾§è¾¹æ  -->
                    <aside class="sidebar">
                        <button class="nav-item active" onclick="app.showMerchantPage('dashboard')">
                            <span>ğŸ“Š</span> æ•°æ®ç»Ÿè®¡
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('orders')">
                            <span>ğŸ“‹</span> è®¢å•ç®¡ç†
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('products')">
                            <span>ğŸ›ï¸</span> å•†å“ç®¡ç†
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('analytics')">
                            <span>ğŸ“ˆ</span> é”€å”®åˆ†æ
                        </button>
                    </aside>

                    <!-- å•†å®¶å†…å®¹åŒº -->
                    <div class="content">
                        <!-- ç»Ÿè®¡é¢æ¿ -->
                        <div id="dashboardPage" class="page active">
                            <h2>æ•°æ®ç»Ÿè®¡</h2>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="totalOrders">0</div>
                                    <div class="stat-label">æ€»è®¢å•æ•°</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="totalRevenue">Â¥0</div>
                                    <div class="stat-label">æ€»æ”¶å…¥</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="todayOrders">0</div>
                                    <div class="stat-label">ä»Šæ—¥è®¢å•</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="pendingOrders">0</div>
                                    <div class="stat-label">å¾…å¤„ç†è®¢å•</div>
                                </div>
                            </div>
                            <div class="order-form">
                                <h3>çƒ­é”€å•†å“æ’è¡Œ</h3>
                                <div id="hotProducts">
                                    <!-- çƒ­é”€å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                        </div>

                        <!-- è®¢å•ç®¡ç† -->
                        <div id="ordersManagePage" class="page">
                            <h2>è®¢å•ç®¡ç†</h2>
                            <div class="orders-container" id="merchantOrdersContainer">
                                <!-- è®¢å•å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- å•†å“ç®¡ç† -->
                        <div id="productsManagePage" class="page">
                            <h2>å•†å“ç®¡ç†</h2>
                            <div class="product-editor">
                                <div class="product-form" id="productForm">
                                    <!-- å•†å“ç¼–è¾‘è¡¨å•å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                        </div>

                        <!-- é”€å”®åˆ†æ -->
                        <div id="analyticsPage" class="page">
                            <h2>é”€å”®åˆ†æ</h2>
                            <div class="order-form">
                                <h3>æœˆåº¦é”€å”®è¶‹åŠ¿</h3>
                                <div id="salesChart">
                                    <p>é”€å”®æ•°æ®å›¾è¡¨åŒºåŸŸï¼ˆå¯é›†æˆå›¾è¡¨åº“ï¼‰</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- æ”¯ä»˜å¼•å¯¼æ¨¡æ€æ¡† -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closePaymentModal()">Ã—</button>
            <div class="payment-guide">
                <h2>ğŸ’° æ”¯ä»˜å¼•å¯¼</h2>
                <p style="margin-bottom: 20px;">è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆæ”¯ä»˜ï¼š</p>
                
                <div class="payment-steps">
                    <div class="payment-step">
                        <div class="step-number">1</div>
                        <div>æˆªå›¾ä¿å­˜è®¢å•å·</div>
                    </div>
                    <div class="payment-step">
                        <div class="step-number">2</div>
                        <div>æ‰«æä¸‹æ–¹å¾®ä¿¡æ”¶æ¬¾ç </div>
                    </div>
                    <div class="payment-step">
                        <div class="step-number">3</div>
                        <div>è½¬è´¦å¯¹åº”é‡‘é¢</div>
                    </div>
                    <div class="payment-step">
                        <div class="step-number">4</div>
                        <div>å¤‡æ³¨è®¢å•å·å6ä½</div>
                    </div>
                    <div class="payment-step">
                        <div class="step-number">5</div>
                        <div>ç‚¹å‡»"æ”¯ä»˜å®Œæˆ"</div>
                    </div>
                </div>

                <div class="payment-qr">
                    <h3>è®¢å•ä¿¡æ¯</h3>
                    <p><strong>è®¢å•å·ï¼š</strong><span id="orderNumber"></span></p>
                    <p><strong>æ”¯ä»˜é‡‘é¢ï¼š</strong><span id="paymentAmount"></span></p>
                    <div style="margin: 20px 0;">
                        <div style="width: 200px; height: 200px; margin: 0 auto; background: #f0f0f0; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                            <div>
                                <div style="font-size: 48px;">ğŸ“±</div>
                                <p style="margin-top: 10px; color: #666;">å¾®ä¿¡æ”¶æ¬¾äºŒç»´ç </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p style="color: #856404; font-size: 14px;">
                        âš ï¸ <strong>é‡è¦æé†’ï¼š</strong>è¯·åŠ¡å¿…åœ¨è½¬è´¦æ—¶å¤‡æ³¨è®¢å•å·å6ä½ï¼Œä»¥ä¾¿æˆ‘ä»¬å¿«é€Ÿç¡®è®¤æ‚¨çš„è®¢å•ï¼
                    </p>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button class="action-btn secondary" style="flex: 1;" onclick="app.closePaymentModal()">å–æ¶ˆ</button>
                    <button class="action-btn primary" style="flex: 1;" onclick="app.confirmPayment()">æ”¯ä»˜å®Œæˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åº”ç”¨çŠ¶æ€ç®¡ç†
        const app = {
            // å•†å“æ•°æ®
            products: [
                { id: 1, name: 'è´æœ', description: 'åœ†ç¯å½¢é¢åŒ…ï¼Œå£æ„ŸQå¼¹ï¼Œæœ‰åš¼åŠ²', price: 5, emoji: 'ğŸ¥¯', category: 'classic', stock: 30 },
                { id: 2, name: 'åå¸', description: 'æŸ”è½¯ç»†è…»ï¼Œé€‚åˆä¸‰æ˜æ²»ï¼Œæ—©é¤é¦–é€‰', price: 10, emoji: 'ğŸ', category: 'classic', stock: 10 },
                { id: 3, name: 'å°åœ†é¢åŒ…', description: 'å°å·§å¯çˆ±ï¼Œæ¾è½¯é¦™ç”œï¼Œé€‚åˆå°æœ‹å‹', price: 5, emoji: 'ğŸ¥–', category: 'classic', stock: 20 },
                { id: 4, name: 'å½©è‰²é¢åŒ…', description: 'å¤©ç„¶è‰²ç´ åˆ¶ä½œï¼Œè‰²å½©ç¼¤çº·ï¼Œé¢œå€¼æ»¡åˆ†', price: 6, emoji: 'ğŸŒˆ', category: 'creative', stock: 15 },
                { id: 5, name: 'æ³•æ£', description: 'ä¼ ç»Ÿæ³•å¼é•¿æ£ï¼Œå¤–è„†å†…è½¯ï¼Œç»å…¸ç™¾æ­', price: 8, emoji: 'ğŸ¥–', category: 'french', stock: 7 },
                { id: 6, name: 'ç‰›è§’åŒ…', description: 'å±‚æ¬¡åˆ†æ˜ï¼Œé»„æ²¹é¦™æ°”ï¼Œé…¥è„†å¯å£', price: 6, emoji: 'ğŸ¥', category: 'french', stock: 15 },
                { id: 7, name: 'è èåŒ…', description: 'é…¥çš®é¦™ç”œï¼Œæ¾è½¯ç»†è…»ï¼Œæ¸¯å¼ç»å…¸', price: 9, emoji: 'ğŸ', category: 'hongkong', stock: 10 },
                { id: 8, name: 'ç”œç”œåœˆ', description: 'ç¯å½¢ç”œç”œåœˆï¼Œç³–éœœè£…é¥°ï¼Œç”œè€Œä¸è…»', price: 7, emoji: 'ğŸ©', category: 'american', stock: 10 },
                { id: 9, name: 'çƒ­ç‹—é¢åŒ…', description: 'æ¾è½¯é¢åŒ…èƒšï¼Œæ­é…é¦™è‚ ï¼Œç¾å‘³ä¸»é£Ÿ', price: 11, emoji: 'ğŸŒ­', category: 'main', stock: 10 }
            ],

            // è´­ç‰©è½¦
            cart: [],
            
            // è®¢å•
            orders: [],
            
            // ç”¨æˆ·ä¿¡æ¯
            profile: {
                name: '',
                phone: '',
                address: ''
            },

            // å½“å‰æ¨¡å¼
            currentMode: 'user',
            
            // å½“å‰é¡µé¢
            currentPage: 'products',
            currentMerchantPage: 'dashboard',

            // åˆå§‹åŒ–åº”ç”¨
            init() {
                this.loadFromStorage();
                this.renderProducts();
                this.renderCart();
                this.renderOrders();
                this.updateStats();
                this.loadProfile();
            },

            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            loadFromStorage() {
                const cart = localStorage.getItem('bakery_cart');
                const orders = localStorage.getItem('bakery_orders');
                const profile = localStorage.getItem('bakery_profile');
                const products = localStorage.getItem('bakery_products');

                if (cart) this.cart = JSON.parse(cart);
                if (orders) this.orders = JSON.parse(orders);
                if (profile) this.profile = JSON.parse(profile);
                if (products) this.products = JSON.parse(products);
            },

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveToStorage() {
                localStorage.setItem('bakery_cart', JSON.stringify(this.cart));
                localStorage.setItem('bakery_orders', JSON.stringify(this.orders));
                localStorage.setItem('bakery_profile', JSON.stringify(this.profile));
                localStorage.setItem('bakery_products', JSON.stringify(this.products));
            },

            // åˆ‡æ¢æ¨¡å¼
            switchMode(mode) {
                this.currentMode = mode;
                
                // æ›´æ–°æ¨¡å¼æŒ‰é’®
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');

                // åˆ‡æ¢å†…å®¹æ˜¾ç¤º
                if (mode === 'user') {
                    document.getElementById('userMode').style.display = 'flex';
                    document.getElementById('merchantMode').style.display = 'none';
                } else {
                    document.getElementById('userMode').style.display = 'none';
                    document.getElementById('merchantMode').style.display = 'flex';
                    this.updateStats();
                }
            },

            // æ˜¾ç¤ºé¡µé¢
            showPage(pageName) {
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('#userMode .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.target.classList.add('active');

                // åˆ‡æ¢é¡µé¢
                document.querySelectorAll('#userMode .page').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageName + 'Page').classList.add('active');

                // æ›´æ–°é¡µé¢å†…å®¹
                this.currentPage = pageName;
                this.updatePageContent(pageName);
            },

            // æ˜¾ç¤ºå•†å®¶é¡µé¢
            showMerchantPage(pageName) {
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('#merchantMode .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.target.classList.add('active');

                // åˆ‡æ¢é¡µé¢
                document.querySelectorAll('#merchantMode .page').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageName + 'Page').classList.add('active');

                // æ›´æ–°é¡µé¢å†…å®¹
                this.currentMerchantPage = pageName;
                this.updateMerchantPageContent(pageName);
            },

            // æ›´æ–°é¡µé¢å†…å®¹
            updatePageContent(pageName) {
                switch (pageName) {
                    case 'products':
                        this.renderProducts();
                        break;
                    case 'cart':
                        this.renderCart();
                        break;
                    case 'orders':
                        this.renderOrders();
                        break;
                    case 'profile':
                        this.loadProfile();
                        break;
                }
            },

            // æ›´æ–°å•†å®¶é¡µé¢å†…å®¹
            updateMerchantPageContent(pageName) {
                switch (pageName) {
                    case 'dashboard':
                        this.updateStats();
                        break;
                    case 'orders':
                        this.renderMerchantOrders();
                        break;
                    case 'products':
                        this.renderProductManagement();
                        break;
                }
            },

            // æ¸²æŸ“å•†å“åˆ—è¡¨
            renderProducts() {
                const productGrid = document.getElementById('productGrid');
                if (!productGrid) return;

                productGrid.innerHTML = '';
                
                this.products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <div class="product-image">${product.emoji}</div>
                        <div class="product-info">
                            <div class="product-name">${product.name}</div>
                            <div class="product-description">${product.description}</div>
                            <div class="product-footer">
                                <div class="product-price">Â¥${product.price}</div>
                                <button class="add-to-cart" onclick="app.addToCart(${product.id})">
                                    åŠ å…¥è´­ç‰©è½¦
                                </button>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            },

            // æ·»åŠ åˆ°è´­ç‰©è½¦
            addToCart(productId) {
                const product = this.products.find(p => p.id === productId);
                if (!product) return;

                const existingItem = this.cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    this.cart.push({
                        ...product,
                        quantity: 1
                    });
                }

                this.saveToStorage();
                this.updateCartCount();
                
                // æ·»åŠ åŠ¨ç”»æ•ˆæœ
                const button = event.target;
                button.classList.add('pulse');
                setTimeout(() => button.classList.remove('pulse'), 500);

                // æ˜¾ç¤ºæç¤º
                this.showNotification('å·²æ·»åŠ åˆ°è´­ç‰©è½¦');
            },

            // æ¸²æŸ“è´­ç‰©è½¦
            renderCart() {
                const cartContainer = document.getElementById('cartContainer');
                if (!cartContainer) return;

                if (this.cart.length === 0) {
                    cartContainer.innerHTML = `
                        <div class="empty-state">
                            <h3>è´­ç‰©è½¦æ˜¯ç©ºçš„</h3>
                            <p>å¿«å»é€‰è´­ç¾å‘³çš„é¢åŒ…å§ï¼</p>
                        </div>
                    `;
                    return;
                }

                let cartHTML = '';
                let total = 0;

                this.cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    cartHTML += `
                        <div class="cart-item">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">Â¥${item.price} Ã— ${item.quantity}</div>
                            </div>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="app.updateQuantity(${index}, -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn" onclick="app.updateQuantity(${index}, 1)">+</button>
                            </div>
                        </div>
                    `;
                });

                cartHTML += `
                    <div class="cart-total">
                        <span>æ€»è®¡ï¼šÂ¥${total}</span>
                        <button class="checkout-btn" onclick="app.proceedToCheckout()">
                            å»ç»“ç®— (${this.cart.length}ä»¶)
                        </button>
                    </div>
                `;

                cartContainer.innerHTML = cartHTML;
            },

            // æ›´æ–°å•†å“æ•°é‡
            updateQuantity(index, change) {
                const item = this.cart[index];
                item.quantity += change;

                if (item.quantity <= 0) {
                    this.cart.splice(index, 1);
                }

                this.saveToStorage();
                this.renderCart();
                this.updateCartCount();
            },

            // æ›´æ–°è´­ç‰©è½¦æ•°é‡
            updateCartCount() {
                const count = this.cart.reduce((sum, item) => sum + item.quantity, 0);
                const cartCount = document.getElementById('cartCount');
                if (cartCount) {
                    cartCount.textContent = count;
                }
            },

            // å»ç»“ç®—
            proceedToCheckout() {
                if (this.cart.length === 0) {
                    this.showNotification('è´­ç‰©è½¦æ˜¯ç©ºçš„', 'error');
                    return;
                }

                // åˆ‡æ¢åˆ°ä¸ªäººä¸­å¿ƒé¡µé¢å¡«å†™åœ°å€
                this.showPage('profile');
                
                // æ›´æ–°å¯¼èˆª
                document.querySelectorAll('#userMode .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('#userMode .nav-item[onclick*="profile"]').classList.add('active');
            },

            // æäº¤è®¢å•
            submitOrder() {
                const name = document.getElementById('profileName').value.trim();
                const phone = document.getElementById('profilePhone').value.trim();
                const address = document.getElementById('profileAddress').value.trim();

                if (!name || !phone || !address) {
                    this.showNotification('è¯·å¡«å†™å®Œæ•´çš„æ”¶è´§ä¿¡æ¯', 'error');
                    return;
                }

                if (this.cart.length === 0) {
                    this.showNotification('è´­ç‰©è½¦æ˜¯ç©ºçš„', 'error');
                    return;
                }

                // åˆ›å»ºè®¢å•
                const orderId = 'BAKERY' + Date.now();
                const total = this.cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

                const order = {
                    id: orderId,
                    name: name,
                    phone: phone,
                    address: address,
                    items: [...this.cart],
                    total: total,
                    status: 'pending',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };

                // ä¿å­˜è®¢å•
                this.orders.push(order);
                this.saveToStorage();

                // æ˜¾ç¤ºæ”¯ä»˜æ¨¡æ€æ¡†
                this.showPaymentModal(orderId, total);
            },

            // æ˜¾ç¤ºæ”¯ä»˜æ¨¡æ€æ¡†
            showPaymentModal(orderId, amount) {
                document.getElementById('orderNumber').textContent = orderId;
                document.getElementById('paymentAmount').textContent = `Â¥${amount}`;
                document.getElementById('paymentModal').classList.add('active');
            },

            // å…³é—­æ”¯ä»˜æ¨¡æ€æ¡†
            closePaymentModal() {
                document.getElementById('paymentModal').classList.remove('active');
            },

            // ç¡®è®¤æ”¯ä»˜
            confirmPayment() {
                // æ¸…ç©ºè´­ç‰©è½¦
                this.cart = [];
                this.saveToStorage();
                this.updateCartCount();
                
                // å…³é—­æ¨¡æ€æ¡†
                this.closePaymentModal();
                
                // è·³è½¬åˆ°è®¢å•é¡µé¢
                this.showPage('orders');
                
                // æ›´æ–°å¯¼èˆª
                document.querySelectorAll('#userMode .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('#userMode .nav-item[onclick*="orders"]').classList.add('active');
                
                this.showNotification('è®¢å•å·²æäº¤ï¼Œè¯·å°½å¿«å®Œæˆæ”¯ä»˜ï¼');
            },

            // æ¸²æŸ“è®¢å•åˆ—è¡¨
            renderOrders() {
                const ordersContainer = document.getElementById('ordersContainer');
                if (!ordersContainer) return;

                if (this.orders.length === 0) {
                    ordersContainer.innerHTML = `
                        <div class="empty-state">
                            <h3>æš‚æ— è®¢å•</h3>
                            <p>å»é€‰è´­ç¾å‘³çš„é¢åŒ…å§ï¼</p>
                        </div>
                    `;
                    return;
                }

                let ordersHTML = '';
                
                // æŒ‰æ—¶é—´å€’åºæ’åˆ—
                const sortedOrders = [...this.orders].sort((a, b) => 
                    new Date(b.createdAt) - new Date(a.createdAt)
                );

                sortedOrders.forEach(order => {
                    const statusClass = `status-${order.status}`;
                    const statusText = this.getStatusText(order.status);
                    
                    ordersHTML += `
                        <div class="order-card">
                            <div class="order-header">
                                <div>
                                    <div class="order-id">è®¢å•å·ï¼š${order.id}</div>
                                    <div style="font-size: 12px; color: var(--text-light); margin-top: 5px;">
                                        ${new Date(order.createdAt).toLocaleString()}
                                    </div>
                                </div>
                                <div class="order-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="order-items">
                                ${order.items.map(item => `
                                    <div class="order-item">
                                        <span>${item.name} Ã— ${item.quantity}</span>
                                        <span>Â¥${item.price * item.quantity}</span>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="order-footer">
                                <div class="order-total">æ€»è®¡ï¼šÂ¥${order.total}</div>
                                <div class="order-actions">
                                    <button class="action-btn secondary" onclick="app.viewOrderDetail('${order.id}')">
                                        æŸ¥çœ‹è¯¦æƒ…
                                    </button>
                                    <button class="action-btn primary" onclick="app.reorder('${order.id}')">
                                        å†æ¬¡è´­ä¹°
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });

                ordersContainer.innerHTML = ordersHTML;
            },

            // è·å–çŠ¶æ€æ–‡æœ¬
            getStatusText(status) {
                const statusMap = {
                    'pending': 'å¾…å¤„ç†',
                    'processing': 'åˆ¶ä½œä¸­',
                    'completed': 'å·²å®Œæˆ',
                    'cancelled': 'å·²å–æ¶ˆ'
                };
                return statusMap[status] || status;
            },

            // æŸ¥çœ‹è®¢å•è¯¦æƒ…
            viewOrderDetail(orderId) {
                const order = this.orders.find(o => o.id === orderId);
                if (!order) return;

                let detailHTML = `
                    <div style="padding: 20px;">
                        <h3>è®¢å•è¯¦æƒ…</h3>
                        <p><strong>è®¢å•å·ï¼š</strong>${order.id}</p>
                        <p><strong>çŠ¶æ€ï¼š</strong>${this.getStatusText(order.status)}</p>
                        <p><strong>æ”¶è´§äººï¼š</strong>${order.name}</p>
                        <p><strong>ç”µè¯ï¼š</strong>${order.phone}</p>
                        <p><strong>åœ°å€ï¼š</strong>${order.address}</p>
                        <p><strong>ä¸‹å•æ—¶é—´ï¼š</strong>${new Date(order.createdAt).toLocaleString()}</p>
                        <hr style="margin: 15px 0;">
                        <h4>å•†å“æ¸…å•</h4>
                `;

                order.items.forEach(item => {
                    detailHTML += `<p>${item.name} Ã— ${item.quantity} = Â¥${item.price * item.quantity}</p>`;
                });

                detailHTML += `
                    <hr style="margin: 15px 0;">
                    <p><strong>æ€»è®¡ï¼šÂ¥${order.total}</strong></p>
                `;

                this.showModal('è®¢å•è¯¦æƒ…', detailHTML);
            },

            // å†æ¬¡è´­ä¹°
            reorder(orderId) {
                const order = this.orders.find(o => o.id === orderId);
                if (!order) return;

                // æ¸…ç©ºå½“å‰è´­ç‰©è½¦
                this.cart = [];
                
                // å°†è®¢å•å•†å“åŠ å…¥è´­ç‰©è½¦
                order.items.forEach(item => {
                    const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
                    if (existingItem) {
                        existingItem.quantity += item.quantity;
                    } else {
                        this.cart.push({...item});
                    }
                });

                this.saveToStorage();
                this.updateCartCount();
                
                // åˆ‡æ¢åˆ°è´­ç‰©è½¦é¡µé¢
                this.showPage('cart');
                
                // æ›´æ–°å¯¼èˆª
                document.querySelectorAll('#userMode .nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('#userMode .nav-item[onclick*="cart"]').classList.add('active');
                
                this.showNotification('å·²å°†å•†å“åŠ å…¥è´­ç‰©è½¦');
            },

            // ä¿å­˜ä¸ªäººä¿¡æ¯
            saveProfile() {
                const name = document.getElementById('profileName').value.trim();
                const phone = document.getElementById('profilePhone').value.trim();
                const address = document.getElementById('profileAddress').value.trim();

                this.profile = { name, phone, address };
                this.saveToStorage();
                
                this.showNotification('ä¸ªäººä¿¡æ¯å·²ä¿å­˜');
                
                // å¦‚æœè´­ç‰©è½¦ä¸ä¸ºç©ºï¼Œç›´æ¥æäº¤è®¢å•
                if (this.cart.length > 0) {
                    this.submitOrder();
                }
            },

            // åŠ è½½ä¸ªäººä¿¡æ¯
            loadProfile() {
                document.getElementById('profileName').value = this.profile.name || '';
                document.getElementById('profilePhone').value = this.profile.phone || '';
                document.getElementById('profileAddress').value = this.profile.address || '';
            },

            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats() {
                // æ€»è®¢å•æ•°
                const totalOrders = this.orders.length;
                document.getElementById('totalOrders').textContent = totalOrders;

                // æ€»æ”¶å…¥
                const totalRevenue = this.orders.reduce((sum, order) => sum + order.total, 0);
                document.getElementById('totalRevenue').textContent = `Â¥${totalRevenue}`;

                // ä»Šæ—¥è®¢å•
                const today = new Date().toDateString();
                const todayOrders = this.orders.filter(order => 
                    new Date(order.createdAt).toDateString() === today
                ).length;
                document.getElementById('todayOrders').textContent = todayOrders;

                // å¾…å¤„ç†è®¢å•
                const pendingOrders = this.orders.filter(order => 
                    order.status === 'pending'
                ).length;
                document.getElementById('pendingOrders').textContent = pendingOrders;

                // çƒ­é”€å•†å“
                this.updateHotProducts();
            },

            // æ›´æ–°çƒ­é”€å•†å“
            updateHotProducts() {
                const productSales = {};
                
                // ç»Ÿè®¡æ¯ä¸ªå•†å“çš„é”€å”®æ•°é‡
                this.orders.forEach(order => {
                    if (order.status !== 'cancelled') {
                        order.items.forEach(item => {
                            if (productSales[item.id]) {
                                productSales[item.id].quantity += item.quantity;
                            } else {
                                productSales[item.id] = {
                                    name: item.name,
                                    quantity: item.quantity,
                                    emoji: item.emoji
                                };
                            }
                        });
                    }
                });

                // æ’åºå¹¶æ˜¾ç¤ºå‰5å
                const sortedProducts = Object.values(productSales)
                    .sort((a, b) => b.quantity - a.quantity)
                    .slice(0, 5);

                const hotProductsHTML = sortedProducts.map((product, index) => `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: var(--bg-white); border-radius: 8px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 30px; height: 30px; background: var(--primary-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                ${index + 1}
                            </div>
                            <div>${product.emoji} ${product.name}</div>
                        </div>
                        <div style="font-weight: 600; color: var(--primary-color);">${product.quantity} ä»½</div>
                    </div>
                `).join('');

                const hotProductsContainer = document.getElementById('hotProducts');
                if (hotProductsContainer) {
                    hotProductsContainer.innerHTML = hotProductsHTML || '<p style="color: var(--text-light);">æš‚æ— é”€å”®æ•°æ®</p>';
                }
            },

            // æ¸²æŸ“å•†å®¶è®¢å•ç®¡ç†
            renderMerchantOrders() {
                const ordersContainer = document.getElementById('merchantOrdersContainer');
                if (!ordersContainer) return;

                if (this.orders.length === 0) {
                    ordersContainer.innerHTML = `
                        <div class="empty-state">
                            <h3>æš‚æ— è®¢å•</h3>
                            <p>è¿˜æ²¡æœ‰æ”¶åˆ°ä»»ä½•è®¢å•</p>
                        </div>
                    `;
                    return;
                }

                let ordersHTML = '';
                
                // æŒ‰çŠ¶æ€å’Œæ—¶é—´æ’åº
                const sortedOrders = [...this.orders].sort((a, b) => {
                    // å¾…å¤„ç†è®¢å•æ’åœ¨å‰é¢
                    if (a.status === 'pending' && b.status !== 'pending') return -1;
                    if (a.status !== 'pending' && b.status === 'pending') return 1;
                    // ç›¸åŒçŠ¶æ€æŒ‰æ—¶é—´å€’åº
                    return new Date(b.createdAt) - new Date(a.createdAt);
                });

                sortedOrders.forEach(order => {
                    const statusClass = `status-${order.status}`;
                    const statusText = this.getStatusText(order.status);
                    
                    ordersHTML += `
                        <div class="order-card">
                            <div class="order-header">
                                <div>
                                    <div class="order-id">è®¢å•å·ï¼š${order.id}</div>
                                    <div style="font-size: 12px; color: var(--text-light); margin-top: 5px;">
                                        ${order.name} | ${order.phone}
                                    </div>
                                </div>
                                <div class="order-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="order-items">
                                ${order.items.map(item => `
                                    <div class="order-item">
                                        <span>${item.name} Ã— ${item.quantity}</span>
                                        <span>Â¥${item.price * item.quantity}</span>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div style="font-size: 12px; color: var(--text-light); margin: 10px 0;">
                                ğŸ“ ${order.address}
                            </div>
                            
                            <div class="order-footer">
                                <div class="order-total">æ€»è®¡ï¼šÂ¥${order.total}</div>
                                <div class="order-actions">
                                    ${this.getOrderActionButtons(order)}
                                </div>
                            </div>
                        </div>
                    `;
                });

                ordersContainer.innerHTML = ordersHTML;
            },

            // è·å–è®¢å•æ“ä½œæŒ‰é’®
            getOrderActionButtons(order) {
                switch (order.status) {
                    case 'pending':
                        return `
                            <button class="action-btn primary" onclick="app.updateOrderStatus('${order.id}', 'processing')">
                                å¼€å§‹åˆ¶ä½œ
                            </button>
                            <button class="action-btn secondary" onclick="app.updateOrderStatus('${order.id}', 'cancelled')">
                                å–æ¶ˆè®¢å•
                            </button>
                        `;
                    case 'processing':
                        return `
                            <button class="action-btn primary" onclick="app.updateOrderStatus('${order.id}', 'completed')">
                                å®Œæˆè®¢å•
                            </button>
                        `;
                    case 'completed':
                        return `
                            <button class="action-btn secondary" onclick="app.viewOrderDetail('${order.id}')">
                                æŸ¥çœ‹è¯¦æƒ…
                            </button>
                        `;
                    case 'cancelled':
                        return `
                            <button class="action-btn secondary" onclick="app.viewOrderDetail('${order.id}')">
                                æŸ¥çœ‹è¯¦æƒ…
                            </button>
                        `;
                    default:
                        return '';
                }
            },

            // æ›´æ–°è®¢å•çŠ¶æ€
            updateOrderStatus(orderId, newStatus) {
                const order = this.orders.find(o => o.id === orderId);
                if (!order) return;

                order.status = newStatus;
                order.updatedAt = new Date().toISOString();
                
                this.saveToStorage();
                this.updateStats();
                this.renderMerchantOrders();
                
                const statusText = this.getStatusText(newStatus);
                this.showNotification(`è®¢å•çŠ¶æ€å·²æ›´æ–°ä¸ºï¼š${statusText}`);
            },

            // æ¸²æŸ“å•†å“ç®¡ç†
            renderProductManagement() {
                const productForm = document.getElementById('productForm');
                if (!productForm) return;

                let formHTML = '';
                
                this.products.forEach(product => {
                    formHTML += `
                        <div style="background: var(--bg-white); padding: 20px; border-radius: 8px;">
                            <h3>${product.emoji} ${product.name}</h3>
                            <div class="form-group">
                                <label>å•†å“åç§°</label>
                                <input type="text" value="${product.name}" onchange="app.updateProduct(${product.id}, 'name', this.value)">
                            </div>
                            <div class="form-group">
                                <label>å•†å“æè¿°</label>
                                <input type="text" value="${product.description}" onchange="app.updateProduct(${product.id}, 'description', this.value)">
                            </div>
                            <div class="form-group">
                                <label>ä»·æ ¼ (Â¥)</label>
                                <input type="number" value="${product.price}" onchange="app.updateProduct(${product.id}, 'price', parseFloat(this.value))">
                            </div>
                            <div class="form-group">
                                <label>emoji</label>
                                <input type="text" value="${product.emoji}" onchange="app.updateProduct(${product.id}, 'emoji', this.value)">
                            </div>
                        </div>
                    `;
                });

                productForm.innerHTML = formHTML;
            },

            // æ›´æ–°å•†å“ä¿¡æ¯
            updateProduct(productId, field, value) {
                const product = this.products.find(p => p.id === productId);
                if (!product) return;

                product[field] = value;
                this.saveToStorage();
                this.renderProducts();
                
                this.showNotification('å•†å“ä¿¡æ¯å·²æ›´æ–°');
            },

            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            showModal(title, content) {
                const modal = document.createElement('div');
                modal.className = 'modal active';
                modal.innerHTML = `
                    <div class="modal-content">
                        <button class="modal-close" onclick="this.closest('.modal').remove()">Ã—</button>
                        <h2>${title}</h2>
                        ${content}
                    </div>
                `;
                document.body.appendChild(modal);
            },

            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? 'var(--primary-color)' : '#e74c3c'};
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    box-shadow: var(--shadow);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        };

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            // Ctrl+Shift+O æ‰“å¼€å•†å®¶æ¨¡å¼ï¼ˆå¼€å‘è€…å¿«æ·é”®ï¼‰
            if (e.ctrlKey && e.shiftKey && e.key === 'O') {
                e.preventDefault();
                document.querySelectorAll('.mode-btn')[1].click();
            }
        });
    </script>
</body>
</html>