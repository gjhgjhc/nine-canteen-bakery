<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰πùÈ£üÂ†ÇÈù¢ÂåÖÂ∫ó</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #FFD93D;
            --secondary-color: #FFB347;
            --accent-color: #FF6B6B;
            --text-dark: #2C3E50;
            --text-light: #7F8C8D;
            --bg-light: #FFF8E1;
            --bg-white: #FFFFFF;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
            --border-radius: 12px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #FFD93D 0%, #FFB347 100%);
            min-height: 100vh;
            color: var(--text-dark);
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            background: var(--bg-white);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mode-switcher {
            display: flex;
            background: var(--bg-light);
            border-radius: 25px;
            padding: 5px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* Main Content */
        main {
            flex: 1;
            background: var(--bg-white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            overflow-y: auto;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 250px;
            background: var(--bg-light);
            padding: 20px 0;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .nav-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            font-size: 15px;
            color: var(--text-dark);
        }

        .nav-item:hover {
            background: rgba(255, 107, 107, 0.1);
            padding-left: 25px;
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 0 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        /* ÂïÜÂìÅÂõæÁâáÂÆπÂô® - ‰ºòÂåñ‰∏∫Âç†Êª°Êï¥‰∏™ÊñπÊ°Ü */
        .product-image-container {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        /* ÂïÜÂìÅÂõæÁâá - Á°Æ‰øùÂç†Êª°Êï¥‰∏™ÂÆπÂô® */
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
            display: block;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: var(--shadow);
            z-index: 2;
        }

        .product-stock {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            z-index: 2;
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .product-description {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            line-height: 1.4;
            min-height: 40px;
        }

        .product-notes {
            font-size: 12px;
            color: #FFB347;
            background: rgba(255, 179, 71, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #FFB347;
            line-height: 1.4;
        }

        /* Âè£Âë≥ÈÄâÊã©Ê†∑Âºè */
        .flavor-selector {
            margin-bottom: 15px;
        }

        .flavor-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-dark);
            margin-bottom: 8px;
            display: block;
        }

        .flavor-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .flavor-option {
            padding: 6px 12px;
            border: 2px solid #ddd;
            border-radius: 20px;
            background: var(--bg-white);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .flavor-option:hover {
            border-color: var(--primary-color);
            background: rgba(255, 217, 61, 0.1);
        }

        .flavor-option.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        .flavor-price {
            font-size: 10px;
            color: var(--text-light);
            margin-top: 2px;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-price {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .add-to-cart {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
        }

        .add-to-cart:hover:not(:disabled) {
            background: #FF5252;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .add-to-cart:active:not(:disabled) {
            transform: translateY(0);
        }

        .add-to-cart:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ÂïÜÂÆ∂Á´ØÊ†∑Âºè */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-light);
        }

        .inventory-table {
            margin-top: 20px;
            background: var(--bg-white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .inventory-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .inventory-table th,
        .inventory-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .inventory-table th {
            background: var(--bg-light);
            font-weight: 600;
            color: var(--text-dark);
        }

        .inventory-table tr:hover {
            background: rgba(255, 107, 107, 0.05);
        }

        .settings-form {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .submit-order-btn,
        .save-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(255, 217, 61, 0.3);
        }

        .submit-order-btn:hover,
        .save-btn:hover {
            background: #FFB347;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 179, 71, 0.4);
        }

        /* ÂïÜÂÆ∂Á´ØËÆ¢ÂçïÂàóË°®Ê†∑Âºè */
        .orders-list {
            margin-top: 20px;
        }

        .order-item {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 15px 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .order-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .order-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
        }

        .order-status.pending {
            background: rgba(255, 217, 61, 0.2);
            color: #FFB347;
            border: 1px solid #FFB347;
        }

        .order-status.accepted {
            background: rgba(255, 179, 71, 0.2);
            color: #FFA726;
            border: 1px solid #FFA726;
        }

        .order-status.delivering {
            background: rgba(255, 217, 61, 0.3);
            color: #FFD93D;
            border: 1px solid #FFD93D;
        }

        .order-status.completed {
            background: rgba(139, 195, 74, 0.2);
            color: #8BC34A;
            border: 1px solid #8BC34A;
        }

        .order-details {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .small-btn {
            padding: 6px 12px;
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            background: var(--bg-white);
            color: var(--primary-color);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .small-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .delete-btn {
            border-color: #FF5252;
            color: #FF5252;
        }

        .delete-btn:hover {
            background: #FF5252;
            color: white;
        }

        /* Ë¥≠Áâ©ËΩ¶Ê†∑Âºè */
        .cart-container {
            margin-top: 20px;
        }

        .cart-item {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }

        .cart-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .cart-item-flavor {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: var(--bg-white);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .quantity-input {
            width: 50px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            font-size: 14px;
        }

        .cart-item-price {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 20px;
        }

        .cart-total {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--shadow);
            text-align: right;
        }

        .total-amount {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .checkout-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
        }

        .checkout-btn:hover {
            background: #FF5252;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        /* ÊàëÁöÑËÆ¢ÂçïÊ†∑Âºè */
        .orders-container {
            margin-top: 20px;
        }

        .user-order-item {
            background: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .user-order-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .user-order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .user-order-number {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .user-order-status {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
        }

        .user-order-status.pending {
            background: rgba(255, 217, 61, 0.2);
            color: #FFB347;
            border: 1px solid #FFB347;
        }

        .user-order-status.processing {
            background: rgba(255, 179, 71, 0.3);
            color: #FFA726;
            border: 1px solid #FFA726;
        }

        .user-order-status.completed {
            background: rgba(139, 195, 74, 0.2);
            color: #8BC34A;
            border: 1px solid #8BC34A;
        }

        .user-order-items {
            margin-bottom: 15px;
        }

        .user-order-item-detail {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .user-order-item-name {
            font-size: 14px;
            color: var(--text-dark);
        }

        .user-order-item-price {
            font-size: 14px;
            color: var(--text-light);
        }

        .user-order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .user-order-total {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .user-order-time {
            font-size: 12px;
            color: var(--text-light);
        }

        .order-notes {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 217, 61, 0.1);
            border-radius: 8px;
            border-left: 3px solid var(--primary-color);
        }

        .order-notes label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .order-notes textarea {
            width: 100%;
            min-height: 80px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .order-notes textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .order-notes .note-example {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 5px;
            font-style: italic;
        }

        /* ÂÖ∂‰ªñÊ†∑Âºè‰øùÊåÅ‰∏çÂèò... */

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                padding: 10px;
                min-height: 100vh;
            }

            header {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }

            .logo {
                font-size: 20px;
            }

            .main-content {
                display: block !important;
            }

            .sidebar {
                width: 100%;
                display: flex;
                overflow-x: auto;
                padding: 10px 0;
                margin-bottom: 15px;
            }

            .nav-item {
                white-space: nowrap;
                padding: 8px 12px;
                font-size: 13px;
                min-width: fit-content;
            }

            .content {
                padding: 0;
            }

            .product-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .product-image-container {
                height: 150px;
            }

            .product-info {
                padding: 10px;
            }

            .product-name {
                font-size: 16px;
            }

            .product-price {
                font-size: 18px;
            }

            .order-notes {
                margin-top: 15px;
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .product-image-container {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <span>ü•ê</span>
                <span>‰πùÈ£üÂ†ÇÈù¢ÂåÖÂ∫ó</span>
            </div>
            <div class="mode-switcher">
                <button class="mode-btn active" onclick="app.switchMode('user')">Áî®Êà∑Á´Ø</button>
                <button class="mode-btn" onclick="app.switchMode('merchant')">ÂïÜÂÆ∂Á´Ø</button>
            </div>
        </header>

        <main class="main-content">
            <!-- Áî®Êà∑Á´Ø -->
            <div id="userMode" class="mode-content">
                <div style="display: flex; gap: 20px;">
                    <!-- Áî®Êà∑‰æßËæπÊ†è -->
                    <aside class="sidebar">
                        <button class="nav-item active" onclick="app.showPage('products')">
                            <span>üõçÔ∏è</span> ÂïÜÂìÅÂàóË°®
                        </button>
                        <button class="nav-item" onclick="app.showPage('cart')">
                            <span>üõí</span> Ë¥≠Áâ©ËΩ¶
                            <span id="cartCount" style="background: var(--primary-color); color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
                        </button>
                        <button class="nav-item" onclick="app.showPage('orders')">
                            <span>üìã</span> ÊàëÁöÑËÆ¢Âçï
                        </button>
                        <button class="nav-item" onclick="app.showPage('profile')">
                            <span>üë§</span> ‰∏™‰∫∫‰∏≠ÂøÉ
                        </button>
                    </aside>

                    <!-- Áî®Êà∑ÂÜÖÂÆπÂå∫ -->
                    <div class="content">
                        <!-- ÂïÜÂìÅÈ°µÈù¢ -->
                        <div id="productsPage" class="page active">
                            <h2>Êñ∞È≤úÈù¢ÂåÖ</h2>
                            <div class="product-grid" id="productGrid">
                                <!-- ÂïÜÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>

                        <!-- Ë¥≠Áâ©ËΩ¶È°µÈù¢ -->
                        <div id="cartPage" class="page">
                            <h2>Ë¥≠Áâ©ËΩ¶</h2>
                            <div class="cart-container" id="cartContainer">
                                <!-- Ë¥≠Áâ©ËΩ¶È°πÁõÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <div class="cart-total" id="cartTotal" style="display: none;">
                                <div class="total-amount">ÊÄªËÆ°Ôºö¬•<span id="totalAmount">0</span></div>
                                <button class="checkout-btn" onclick="app.checkout()">ÂéªÁªìÁÆó</button>
                            </div>
                            <div class="empty-cart" id="emptyCart" style="text-align: center; padding: 60px 20px; color: var(--text-light);">
                                <h3>üõí Ë¥≠Áâ©ËΩ¶Á©∫Á©∫Â¶Ç‰πü</h3>
                                <p>Âø´ÂéªÊåëÈÄâ‰∏Ä‰∫õÁæéÂë≥ÁöÑÈù¢ÂåÖÂêßÔºÅ</p>
                            </div>
                        </div>

                        <!-- ËÆ¢ÂçïÈ°µÈù¢ -->
                        <div id="ordersPage" class="page">
                            <h2>ÊàëÁöÑËÆ¢Âçï</h2>
                            <div class="orders-container" id="ordersContainer">
                                <!-- ËÆ¢ÂçïÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <div class="empty-orders" id="emptyOrders" style="text-align: center; padding: 60px 20px; color: var(--text-light);">
                                <h3>üìã ÊöÇÊó†ËÆ¢Âçï</h3>
                                <p>ÊÇ®ËøòÊ≤°Êúâ‰ªª‰ΩïËÆ¢ÂçïËÆ∞ÂΩï</p>
                            </div>
                        </div>

                        <!-- ‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ -->
                        <div id="profilePage" class="page">
                            <h2>‰∏™‰∫∫‰∏≠ÂøÉ</h2>
                            <div class="order-form">
                                <h3 style="margin-bottom: 20px;">Êî∂Ë¥ßÂú∞ÂùÄ</h3>
                                <div class="form-group">
                                    <label>ÂßìÂêç</label>
                                    <input type="text" id="profileName" placeholder="ËØ∑ËæìÂÖ•ÂßìÂêç">
                                </div>
                                <div class="form-group">
                                    <label>ÁîµËØù</label>
                                    <input type="tel" id="profilePhone" placeholder="ËØ∑ËæìÂÖ•ÁîµËØù">
                                </div>
                                <div class="form-group">
                                    <label>Âú∞ÂùÄ</label>
                                    <textarea id="profileAddress" rows="3" placeholder="ËØ∑ËæìÂÖ•ËØ¶ÁªÜÂú∞ÂùÄ"></textarea>
                                </div>
                                
                                <!-- Êñ∞Â¢ûÁöÑÂ§áÊ≥®Ê°Ü -->
                                <div class="order-notes">
                                    <label>ËÆ¢ÂçïÂ§áÊ≥®ÔºàÈÄâÂ°´Ôºâ</label>
                                    <textarea id="orderNotes" placeholder="ËØ∑ËæìÂÖ•ËÆ¢ÂçïÂ§áÊ≥®Ôºå‰æãÂ¶ÇÔºöÁâπÊÆäË¶ÅÊ±Ç„ÄÅÈÄÅËææÊó∂Èó¥Á≠â..."></textarea>
                                    <div class="note-example">Á§∫‰æãÔºöËØ∑‰∏ãÂçà2ÁÇπÂêéÈÄÅËææÔºå‰∏çË¶ÅÊîæÁ≥ñ</div>
                                </div>
                                
                                <button class="submit-order-btn" onclick="app.submitOrder()">Êèê‰∫§ËÆ¢Âçï</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂïÜÂÆ∂Á´Ø -->
            <div id="merchantMode" class="mode-content" style="display: none;">
                <div style="display: flex; gap: 20px;">
                    <!-- ÂïÜÂÆ∂‰æßËæπÊ†è -->
                    <aside class="sidebar">
                        <button class="nav-item active" onclick="app.showMerchantPage('dashboard', event)">
                            <span>üìä</span> Êï∞ÊçÆÁªüËÆ°
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('inventory', event)">
                            <span>üì¶</span> Â∫ìÂ≠òÁÆ°ÁêÜ
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('orders', event)">
                            <span>üìã</span> ËÆ¢ÂçïÁÆ°ÁêÜ
                        </button>
                        <button class="nav-item" onclick="app.showMerchantPage('settings', event)">
                            <span>‚öôÔ∏è</span> Á≥ªÁªüËÆæÁΩÆ
                        </button>
                    </aside>

                    <!-- ÂïÜÂÆ∂ÂÜÖÂÆπÂå∫ -->
                    <div class="content">
                        <!-- Êï∞ÊçÆÁªüËÆ°È°µÈù¢ -->
                        <div id="dashboardPage" class="page active">
                            <h2>Êï∞ÊçÆÁªüËÆ°</h2>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="todaySales">¬•0</div>
                                    <div class="stat-label">‰ªäÊó•ÈîÄÂîÆÈ¢ù</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="todayOrders">0</div>
                                    <div class="stat-label">‰ªäÊó•ËÆ¢ÂçïÊï∞</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="totalStock">0</div>
                                    <div class="stat-label">ÂïÜÂìÅÂ∫ìÂ≠ò</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="pendingOrders">0</div>
                                    <div class="stat-label">ÂæÖÂ§ÑÁêÜËÆ¢Âçï</div>
                                </div>
                            </div>
                        </div>

                        <!-- Â∫ìÂ≠òÁÆ°ÁêÜÈ°µÈù¢ -->
                        <div id="inventoryPage" class="page">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h2>Â∫ìÂ≠òÁÆ°ÁêÜ</h2>
                                <button class="save-btn" onclick="app.addNewProduct()">Ê∑ªÂä†Êñ∞ÂïÜÂìÅ</button>
                            </div>
                            <div class="inventory-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ÂïÜÂìÅÂêçÁß∞</th>
                                            <th>ÂΩìÂâçÂ∫ìÂ≠ò</th>
                                            <th>‰ª∑Ê†º</th>
                                            <th>Êìç‰Ωú</th>
                                        </tr>
                                    </thead>
                                    <tbody id="inventoryTable">
                                        <!-- Â∫ìÂ≠òÊï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- ËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ -->
                        <div id="merchantOrdersPage" class="page">
                            <h2>ËÆ¢ÂçïÁÆ°ÁêÜ</h2>
                            <div class="orders-list" id="merchantOrdersList">
                                <!-- ÂïÜÂÆ∂ËÆ¢ÂçïÊï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>

                        <!-- Á≥ªÁªüËÆæÁΩÆÈ°µÈù¢ -->
                        <div id="settingsPage" class="page">
                            <h2>Á≥ªÁªüËÆæÁΩÆ</h2>
                            <div class="settings-form">
                                <h3>Â∫óÈì∫‰ø°ÊÅØ</h3>
                                <div class="form-group">
                                    <label>Â∫óÈì∫ÂêçÁß∞</label>
                                    <input type="text" value="‰πùÈ£üÂ†ÇÈù¢ÂåÖÂ∫ó" placeholder="ËØ∑ËæìÂÖ•Â∫óÈì∫ÂêçÁß∞">
                                </div>
                                <div class="form-group">
                                    <label>Ëê•‰∏öÊó∂Èó¥</label>
                                    <input type="text" value="08:00-22:00" placeholder="ËØ∑ËæìÂÖ•Ëê•‰∏öÊó∂Èó¥">
                                </div>
                                <div class="form-group">
                                    <label>ËÅîÁ≥ªÁîµËØù</label>
                                    <input type="tel" value="138-0000-0000" placeholder="ËØ∑ËæìÂÖ•ËÅîÁ≥ªÁîµËØù">
                                </div>
                                <button class="save-btn">‰øùÂ≠òËÆæÁΩÆ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Â∫îÁî®Áä∂ÊÄÅÁÆ°ÁêÜ
        const app = {
            // Ë¥≠Áâ©ËΩ¶Êï∞ÊçÆ
            cart: [],
            
            // Áî®Êà∑ËÆ¢ÂçïÊï∞ÊçÆ
            userOrders: [],
            
            // ÂïÜÂìÅÊï∞ÊçÆÔºàÊ∑ªÂä†ÂõæÁâá„ÄÅÂ§áÊ≥®Â≠óÊÆµÂíåÂè£Âë≥ÈÄâÊã©Ôºâ
            products: [
            { id: 1, name: 'Ë¥ùÊûú', description: 'ÂúÜÁéØÂΩ¢Èù¢ÂåÖÔºåÂè£ÊÑüQÂºπÔºåÊúâÂöºÂä≤', price: 5, emoji: 'ü•Ø', category: 'classic', stock: 30, 
              image: 'https://imgs.699pic.com/images/600/383/566.jpg!list1x.v2',
              notes: 'ÁªèÂÖ∏ÂéüÂë≥ÔºåÂèØÊê≠ÈÖçÂ•∂Ê≤πÂ•∂ÈÖ™ÊàñÊûúÈÖ±',
              flavors: [
                { id: 1, name: 'ÂéüÂë≥Ë¥ùÊûú', price: 5, description: 'ÁªèÂÖ∏ÂéüÂë≥ÔºåÈ∫¶È¶ôÊµìÈÉÅ' },
                { id: 2, name: 'ÂÖ®È∫¶Ë¥ùÊûú', price: 6, description: 'ÂÅ•Â∫∑ÂÖ®È∫¶Ôºå‰ΩéÁ≥ñ‰ΩéËÑÇ' },
                { id: 3, name: 'ËäùÈ∫ªË¥ùÊûú', price: 6, description: 'È¶ôËÑÜËäùÈ∫ªÔºåÂè£ÊÑü‰∏∞ÂØå' }
              ] },
            { id: 2, name: 'ÂêêÂè∏', description: 'ÊüîËΩØÁªÜËÖªÔºåÈÄÇÂêà‰∏âÊòéÊ≤ªÔºåÊó©È§êÈ¶ñÈÄâ', price: 10, emoji: 'üçû', category: 'classic', stock: 10,
              image: 'https://images.unsplash.com/photo-1533089860892-a7c6f0a88666?w=400&h=300&fit=crop&crop=center',
              notes: 'ÂéöÂàáÂêêÂè∏ÔºåÁÉòÁÑôÊ∏©Â∫¶Á≤æÂáÜÊéßÂà∂',
              flavors: [
                { id: 1, name: 'ÁôΩÂêêÂè∏', price: 10, description: 'ÁªèÂÖ∏ÁôΩÂêêÂè∏ÔºåÊüîËΩØÁªÜËÖª' },
                { id: 2, name: 'ÂÖ®È∫¶ÂêêÂè∏', price: 12, description: 'ÂÅ•Â∫∑ÂÖ®È∫¶ÔºåËê•ÂÖª‰∏∞ÂØå' },
                { id: 3, name: 'ÁâõÂ•∂ÂêêÂè∏', price: 12, description: 'Â•∂È¶ôÊµìÈÉÅÔºåÂè£ÊÑüÁªµËΩØ' }
              ] },
            { id: 3, name: 'Â∞èÂúÜÈù¢ÂåÖ', description: 'Â∞èÂ∑ßÂèØÁà±ÔºåÊùæËΩØÈ¶ôÁîúÔºåÈÄÇÂêàÂ∞èÊúãÂèã', price: 5, emoji: 'ü•Ø', category: 'classic', stock: 20,
              image: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?w=400&h=300&fit=crop&crop=center',
              notes: 'Ëø∑‰Ω†Â∞∫ÂØ∏ÔºåÈÄÇÂêàÂÑøÁ´•‰∏ãÂçàËå∂',
              flavors: [
                { id: 1, name: 'ÂéüÂë≥Â∞èÂúÜÂåÖ', price: 5, description: 'ÁªèÂÖ∏ÂéüÂë≥ÔºåÊùæËΩØÈ¶ôÁîú' },
                { id: 2, name: 'Â∑ßÂÖãÂäõÂ∞èÂúÜÂåÖ', price: 6, description: 'Â∑ßÂÖãÂäõÈ£éÂë≥ÔºåÁîúËÄå‰∏çËÖª' },
                { id: 3, name: 'Ëë°ËêÑÂπ≤Â∞èÂúÜÂåÖ', price: 6, description: 'Ëë°ËêÑÂπ≤ÁÇπÁºÄÔºåÂè£ÊÑü‰∏∞ÂØå' }
              ] },
            { id: 4, name: 'ÂΩ©Ëâ≤Èù¢ÂåÖ', description: 'Â§©ÁÑ∂Ëâ≤Á¥†Âà∂‰ΩúÔºåËâ≤ÂΩ©Áº§Á∫∑ÔºåÈ¢úÂÄºÊª°ÂàÜ', price: 6, emoji: 'üåà', category: 'creative', stock: 15,
              image: 'https://images.unsplash.com/photo-1528736235302-52922df5c122?w=400&h=300&fit=crop&crop=center',
              notes: '‰ΩøÁî®ÊûúËî¨Á≤âË∞ÉËâ≤ÔºåÂÅ•Â∫∑ÂÆâÂÖ®',
              flavors: [
                { id: 1, name: 'ÂΩ©ËôπÈù¢ÂåÖ', price: 6, description: '‰∏ÉÂΩ©ÂΩ©ËôπÔºåÈ¢úÂÄºË∂ÖÈ´ò' },
                { id: 2, name: 'ÊäπËå∂Èù¢ÂåÖ', price: 7, description: 'ÊäπËå∂È£éÂë≥ÔºåÊ∏ÖÊñ∞ÂÅ•Â∫∑' },
                { id: 3, name: 'Á¥´ËñØÈù¢ÂåÖ', price: 7, description: 'Á¥´ËñØÂ§©ÁÑ∂ÔºåËê•ÂÖª‰∏∞ÂØå' }
              ] },
            { id: 5, name: 'Ê≥ïÊ£ç', description: '‰º†ÁªüÊ≥ïÂºèÈïøÊ£çÔºåÂ§ñËÑÜÂÜÖËΩØÔºåÁªèÂÖ∏ÁôæÊê≠', price: 8, emoji: 'ü•ñ', category: 'french', stock: 7,
              image: 'https://images.unsplash.com/photo-1549931319-a545dcf3bc73?w=400&h=300&fit=crop&crop=center',
              notes: '‰º†ÁªüÊ≥ïÂºèÂ∑•Ëâ∫ÔºåÂ§ñÁöÆÈÖ•ËÑÜ',
              flavors: [
                { id: 1, name: 'ÁªèÂÖ∏Ê≥ïÊ£ç', price: 8, description: '‰º†ÁªüÂ∑•Ëâ∫ÔºåÂ§ñËÑÜÂÜÖËΩØ' },
                { id: 2, name: 'ËíúÈ¶ôÊ≥ïÊ£ç', price: 10, description: 'ËíúÈ¶ôÊµìÈÉÅÔºåÈ£éÂë≥Áã¨Áâπ' },
                { id: 3, name: 'ËäùÂ£´Ê≥ïÊ£ç', price: 10, description: 'ËäùÂ£´ÁÇπÁºÄÔºåÂ•∂È¶ôÂçÅË∂≥' }
              ] },
            { id: 6, name: 'ÁâõËßíÂåÖ', description: 'Â±ÇÊ¨°ÂàÜÊòéÔºåÈªÑÊ≤πÈ¶ôÊ∞îÔºåÈÖ•ËÑÜÂèØÂè£', price: 6, emoji: 'ü•ê', category: 'french', stock: 15,
              image: 'https://img.shetu66.com/2022/12/18/1671372671379175.jpg',
              notes: '‰ΩøÁî®ËøõÂè£ÈªÑÊ≤πÔºåÈ¶ôÊ∞îÊµìÈÉÅ',
              flavors: [
                { id: 1, name: 'ÂéüÂë≥ÁâõËßíÂåÖ', price: 6, description: 'ÁªèÂÖ∏ÂéüÂë≥ÔºåÈªÑÊ≤πÈ¶ôÊ∞î' },
                { id: 2, name: 'Êùè‰ªÅÁâõËßíÂåÖ', price: 8, description: 'Êùè‰ªÅÁâáË£ÖÈ•∞ÔºåÂè£ÊÑü‰∏∞ÂØå' },
                { id: 3, name: 'Â∑ßÂÖãÂäõÁâõËßíÂåÖ', price: 8, description: 'Â∑ßÂÖãÂäõÈ¶ÖÊñôÔºåÁîúÈ¶ôÂèØÂè£' }
              ] }
        ],

            // ÂàùÂßãÂåñÂ∫îÁî®
            init() {
                this.loadProductsFromStorage();
                this.renderProducts();
                this.loadCartFromStorage();
                this.loadOrdersFromStorage();
            },

            // Ê∏≤ÊüìÂïÜÂìÅÂàóË°®
            renderProducts() {
                const productGrid = document.getElementById('productGrid');
                productGrid.innerHTML = '';

                this.products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    
                    // ÁîüÊàêÂè£Âë≥ÈÄâÈ°πHTML
                    const flavorsHTML = product.flavors ? product.flavors.map((flavor, index) => `
                        <div class="flavor-option ${index === 0 ? 'selected' : ''}" 
                             data-product-id="${product.id}" 
                             data-flavor-id="${flavor.id}"
                             onclick="app.selectFlavor(${product.id}, ${flavor.id})">
                            ${flavor.name}
                            <div class="flavor-price">¬•${flavor.price}</div>
                        </div>
                    `).join('') : '';
                    
                    productCard.innerHTML = `
                        <div class="product-image-container">
                            <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTk5OTkiPiTmsqHmnInluIPku7Y8L3RleHQ+PC9zdmc+';">
                            <div class="product-badge">${product.emoji}</div>
                            <div class="product-stock">Â∫ìÂ≠ò: ${product.stock}</div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">
                                <span>${product.emoji}</span>
                                ${product.name}
                            </h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-notes">${product.notes}</div>
                            ${product.flavors ? `
                                <div class="flavor-selector">
                                    <label class="flavor-label">ÈÄâÊã©Âè£Âë≥Ôºö</label>
                                    <div class="flavor-options">
                                        ${flavorsHTML}
                                    </div>
                                </div>
                            ` : ''}
                            <div class="product-footer">
                                <div class="product-price" id="price-${product.id}">¬•${product.price}</div>
                                <button class="add-to-cart" onclick="app.addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                                    ${product.stock === 0 ? 'Â∑≤ÂîÆÁΩÑ' : 'Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶'}
                                </button>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            },

            // ÂàáÊç¢Âà∞Áî®Êà∑Á´Ø
            switchMode(mode) {
                const userMode = document.getElementById('userMode');
                const merchantMode = document.getElementById('merchantMode');
                const userBtns = document.querySelectorAll('.mode-btn');

                if (mode === 'user') {
                    userMode.style.display = 'block';
                    merchantMode.style.display = 'none';
                    userBtns[0].classList.add('active');
                    userBtns[1].classList.remove('active');
                    
                    // Áî®Êà∑Á´ØÔºöÊøÄÊ¥ªÁ¨¨‰∏Ä‰∏™ÂØºËà™È°πÔºàÂïÜÂìÅÂàóË°®Ôºâ
                    const userNavItems = userMode.querySelectorAll('.nav-item');
                    const userPages = userMode.querySelectorAll('.page');
                    userNavItems.forEach(item => item.classList.remove('active'));
                    userPages.forEach(page => page.classList.remove('active'));
                    
                    if (userNavItems.length > 0) {
                        userNavItems[0].classList.add('active');
                    }
                    if (userPages.length > 0) {
                        userPages[0].classList.add('active');
                    }
                } else {
                    userMode.style.display = 'none';
                    merchantMode.style.display = 'block';
                    userBtns[0].classList.remove('active');
                    userBtns[1].classList.add('active');
                    
                    // ÂïÜÂÆ∂Á´ØÔºöÊøÄÊ¥ªÁ¨¨‰∏Ä‰∏™ÂØºËà™È°πÔºàÊï∞ÊçÆÁªüËÆ°Ôºâ
                    const merchantNavItems = merchantMode.querySelectorAll('.nav-item');
                    const merchantPages = merchantMode.querySelectorAll('.page');
                    merchantNavItems.forEach(item => item.classList.remove('active'));
                    merchantPages.forEach(page => page.classList.remove('active'));
                    
                    if (merchantNavItems.length > 0) {
                        merchantNavItems[0].classList.add('active');
                    }
                    if (merchantPages.length > 0) {
                        merchantPages[0].classList.add('active');
                    }
                    
                    // ÂàáÊç¢Âà∞ÂïÜÂÆ∂Á´ØÊó∂ÂàùÂßãÂåñÂïÜÂÆ∂Êï∞ÊçÆ
                    this.initMerchantData();
                }
            },

            // ÊòæÁ§∫È°µÈù¢
            showPage(page) {
                const pages = document.querySelectorAll('.page');
                const navItems = document.querySelectorAll('.nav-item');

                pages.forEach(p => p.classList.remove('active'));
                navItems.forEach(item => item.classList.remove('active'));

                document.getElementById(page + 'Page').classList.add('active');
                event.target.classList.add('active');

                // Ê†πÊçÆÈ°µÈù¢Á±ªÂûãÊ∏≤ÊüìÁõ∏Â∫îÂÜÖÂÆπ
                if (page === 'cart') {
                    this.renderCart();
                } else if (page === 'orders') {
                    this.renderUserOrders();
                }
            },

            // ÈÄâÊã©Âè£Âë≥
            selectFlavor(productId, flavorId) {
                const product = this.products.find(p => p.id === productId);
                if (!product || !product.flavors) return;

                // ÁßªÈô§ÊâÄÊúâÂè£Âë≥ÈÄâÈ°πÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
                const flavorOptions = document.querySelectorAll(`.flavor-option[data-product-id="${productId}"]`);
                flavorOptions.forEach(option => option.classList.remove('selected'));

                // Ê∑ªÂä†ÈÄâ‰∏≠Áä∂ÊÄÅÂà∞ÂΩìÂâçÈÄâÈ°π
                const selectedOption = document.querySelector(`.flavor-option[data-product-id="${productId}"][data-flavor-id="${flavorId}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }

                // Êõ¥Êñ∞‰ª∑Ê†ºÊòæÁ§∫
                const selectedFlavor = product.flavors.find(f => f.id === flavorId);
                if (selectedFlavor) {
                    const priceElement = document.getElementById(`price-${productId}`);
                    if (priceElement) {
                        priceElement.textContent = `¬•${selectedFlavor.price}`;
                    }
                }
            },

            // Ëé∑ÂèñÂΩìÂâçÈÄâ‰∏≠ÁöÑÂè£Âë≥
            getSelectedFlavor(productId) {
                const product = this.products.find(p => p.id === productId);
                if (!product || !product.flavors) return null;

                const selectedOption = document.querySelector(`.flavor-option.selected[data-product-id="${productId}"]`);
                if (!selectedOption) return product.flavors[0]; // ÈªòËÆ§Á¨¨‰∏Ä‰∏™Âè£Âë≥

                const flavorId = parseInt(selectedOption.getAttribute('data-flavor-id'));
                return product.flavors.find(f => f.id === flavorId) || product.flavors[0];
            },

            // Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶
            addToCart(productId) {
                const product = this.products.find(p => p.id === productId);
                if (product && product.stock > 0) {
                    const selectedFlavor = this.getSelectedFlavor(productId);
                    const flavorName = selectedFlavor ? selectedFlavor.name : product.name;
                    const price = selectedFlavor ? selectedFlavor.price : product.price;
                    
                    // Êü•ÊâæË¥≠Áâ©ËΩ¶‰∏≠ÊòØÂê¶Â∑≤ÊúâÁõ∏ÂêåÂïÜÂìÅÂíåÂè£Âë≥
                    const existingItem = this.cart.find(item => 
                        item.productId === productId && 
                        item.flavorId === (selectedFlavor ? selectedFlavor.id : null)
                    );
                    
                    // Ê£ÄÊü•Â∫ìÂ≠òÊòØÂê¶Ë∂≥Â§ü
                    const currentQuantity = existingItem ? existingItem.quantity + 1 : 1;
                    if (product.stock < currentQuantity) {
                        alert(`ÂïÜÂìÅ ${product.name} Â∫ìÂ≠ò‰∏çË∂≥ÔºÅÂΩìÂâçÂ∫ìÂ≠òÔºö${product.stock}`);
                        return;
                    }
                    
                    if (existingItem) {
                        // Â¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÂ¢ûÂä†Êï∞Èáè
                        existingItem.quantity += 1;
                    } else {
                        // Â¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÊ∑ªÂä†Êñ∞ÂïÜÂìÅ
                        this.cart.push({
                            id: Date.now(),
                            productId: productId,
                            flavorId: selectedFlavor ? selectedFlavor.id : null,
                            productName: product.name,
                            flavorName: flavorName,
                            price: price,
                            quantity: 1,
                            image: product.image,
                            emoji: product.emoji
                        });
                    }
                    
                    alert(`Â∑≤Ê∑ªÂä† ${flavorName} Âà∞Ë¥≠Áâ©ËΩ¶ÔºÅ‰ª∑Ê†ºÔºö¬•${price}`);
                    this.updateCartDisplay();
                    this.saveCartToStorage();
                }
            },

            // Êèê‰∫§ËÆ¢ÂçïÔºàÂ∑≤Êõ¥Êñ∞ÔºåÂåÖÂê´Â§áÊ≥®ÂäüËÉΩÔºâ
            submitOrder() {
                const name = document.getElementById('profileName').value;
                const phone = document.getElementById('profilePhone').value;
                const address = document.getElementById('profileAddress').value;
                const notes = document.getElementById('orderNotes').value; // Ëé∑ÂèñÂ§áÊ≥®ÂÜÖÂÆπ

                if (!name || !phone || !address) {
                    alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÊî∂Ë¥ß‰ø°ÊÅØÔºÅ');
                    return;
                }

                if (this.cart.length === 0) {
                    alert('Ë¥≠Áâ©ËΩ¶‰∏∫Á©∫ÔºåËØ∑ÂÖàÊ∑ªÂä†ÂïÜÂìÅÔºÅ');
                    return;
                }

                // Ê£ÄÊü•Â∫ìÂ≠òÊòØÂê¶Ë∂≥Â§ü
                for (const item of this.cart) {
                    const product = this.products.find(p => p.id === item.productId);
                    if (!product || product.stock < item.quantity) {
                        alert(`ÂïÜÂìÅ ${item.productName} Â∫ìÂ≠ò‰∏çË∂≥ÔºÅÂΩìÂâçÂ∫ìÂ≠òÔºö${product ? product.stock : 0}`);
                        return;
                    }
                }

                // ÂáèÂ∞ëÂïÜÂìÅÂ∫ìÂ≠ò
                for (const item of this.cart) {
                    const product = this.products.find(p => p.id === item.productId);
                    if (product) {
                        product.stock -= item.quantity;
                    }
                }

                // ÂàõÂª∫Êñ∞ËÆ¢ÂçïÔºåÂåÖÂê´Â§áÊ≥®‰ø°ÊÅØ
                const order = {
                    id: Date.now(),
                    customer: name,
                    phone: phone,
                    address: address,
                    notes: notes, // ‰øùÂ≠òÂ§áÊ≥®‰ø°ÊÅØ
                    items: [...this.cart],
                    total: this.calculateCartTotal(),
                    status: 'pending',
                    time: new Date().toLocaleString('zh-CN')
                };

                this.userOrders.unshift(order);
                this.cart = [];
                this.updateCartDisplay();
                this.saveCartToStorage();
                this.saveOrdersToStorage();
                this.saveProductsToStorage(); // ‰øùÂ≠òÊõ¥Êñ∞ÂêéÁöÑÂ∫ìÂ≠òÊï∞ÊçÆ

                // ÈáçÊñ∞Ê∏≤ÊüìÂïÜÂìÅÂàóË°®ÂíåÂ∫ìÂ≠òË°®Ê†º
                this.renderProducts();
                this.renderInventoryTable();

                // Ê∏ÖÁ©∫Â§áÊ≥®Ê°Ü
                document.getElementById('orderNotes').value = '';

                alert('ËÆ¢ÂçïÊèê‰∫§ÊàêÂäüÔºÅËØ∑Á≠âÂæÖÂïÜÂÆ∂ËÅîÁ≥ªÊÇ®„ÄÇ' + (notes ? `\nÊÇ®ÁöÑÂ§áÊ≥®Ôºö${notes}` : ''));
                
                // Êõ¥Êñ∞ÂïÜÂÆ∂Á´ØÊï∞ÊçÆÁªüËÆ°
                this.updateDashboardStats();
            },

            // Ë¥≠Áâ©ËΩ¶Áõ∏ÂÖ≥ÂäüËÉΩ
            updateCartDisplay() {
                const cartCount = document.getElementById('cartCount');
                const totalItems = this.cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = totalItems;
            },

            calculateCartTotal() {
                return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            },

            // Ê∏≤ÊüìË¥≠Áâ©ËΩ¶
            renderCart() {
                console.log('renderCart called, cart items:', this.cart.length);
                const cartContainer = document.getElementById('cartContainer');
                const cartTotal = document.getElementById('cartTotal');
                const emptyCart = document.getElementById('emptyCart');

                if (this.cart.length === 0) {
                    console.log('Cart is empty, showing empty message');
                    if (cartContainer) cartContainer.style.display = 'none';
                    if (cartTotal) cartTotal.style.display = 'none';
                    if (emptyCart) emptyCart.style.display = 'block';
                    return;
                }

                console.log('Cart has items, rendering cart');
                if (cartContainer) cartContainer.style.display = 'block';
                if (cartTotal) cartTotal.style.display = 'block';
                if (emptyCart) emptyCart.style.display = 'none';

                if (cartContainer) {
                    cartContainer.innerHTML = '';
                    this.cart.forEach(item => {
                        const cartItem = document.createElement('div');
                        cartItem.className = 'cart-item';
                        cartItem.innerHTML = `
                            <img src="${item.image}" alt="${item.productName}" class="cart-item-image" onerror="this.style.display='none'">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.emoji} ${item.productName}</div>
                                <div class="cart-item-flavor">${item.flavorName}</div>
                                <div class="cart-item-controls">
                                    <div class="quantity-control">
                                        <button class="quantity-btn" onclick="app.updateQuantity(${item.id}, -1)">-</button>
                                        <input type="number" class="quantity-input" value="${item.quantity}" min="1" onchange="app.setQuantity(${item.id}, this.value)">
                                        <button class="quantity-btn" onclick="app.updateQuantity(${item.id}, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="cart-item-price">¬•${item.price}</div>
                            <button class="small-btn delete-btn" onclick="app.removeFromCart(${item.id})">Âà†Èô§</button>
                        `;
                        cartContainer.appendChild(cartItem);
                    });
                }

                const totalAmountElement = document.getElementById('totalAmount');
                if (totalAmountElement) {
                    totalAmountElement.textContent = this.calculateCartTotal();
                }
            },

            // Êõ¥Êñ∞ÂïÜÂìÅÊï∞Èáè
            updateQuantity(itemId, change) {
                const item = this.cart.find(item => item.id === itemId);
                if (item) {
                    const newQuantity = item.quantity + change;
                    
                    // Ê£ÄÊü•Â∫ìÂ≠òÊòØÂê¶Ë∂≥Â§ü
                    const product = this.products.find(p => p.id === item.productId);
                    if (product && newQuantity > product.stock) {
                        alert(`ÂïÜÂìÅ ${item.productName} Â∫ìÂ≠ò‰∏çË∂≥ÔºÅÂΩìÂâçÂ∫ìÂ≠òÔºö${product.stock}`);
                        return;
                    }
                    
                    item.quantity = newQuantity;
                    if (item.quantity <= 0) {
                        this.removeFromCart(itemId);
                    } else {
                        this.updateCartDisplay();
                        this.saveCartToStorage();
                        this.renderCart();
                    }
                }
            },

            // ËÆæÁΩÆÂïÜÂìÅÊï∞Èáè
            setQuantity(itemId, quantity) {
                const item = this.cart.find(item => item.id === itemId);
                if (item) {
                    quantity = parseInt(quantity);
                    if (quantity > 0) {
                        // Ê£ÄÊü•Â∫ìÂ≠òÊòØÂê¶Ë∂≥Â§ü
                        const product = this.products.find(p => p.id === item.productId);
                        if (product && quantity > product.stock) {
                            alert(`ÂïÜÂìÅ ${item.productName} Â∫ìÂ≠ò‰∏çË∂≥ÔºÅÂΩìÂâçÂ∫ìÂ≠òÔºö${product.stock}`);
                            // ÊÅ¢Â§çÂéüÊï∞Èáè
                            document.querySelector(`input[value="${item.quantity}"]`).value = item.quantity;
                            return;
                        }
                        
                        item.quantity = quantity;
                        this.updateCartDisplay();
                        this.saveCartToStorage();
                        this.renderCart();
                    }
                }
            },

            // ‰ªéË¥≠Áâ©ËΩ¶ÁßªÈô§ÂïÜÂìÅ
            removeFromCart(itemId) {
                this.cart = this.cart.filter(item => item.id !== itemId);
                this.updateCartDisplay();
                this.saveCartToStorage();
                this.renderCart();
            },

            // Ê∏≤ÊüìÁî®Êà∑ËÆ¢ÂçïÔºàÂ∑≤Êõ¥Êñ∞ÔºåÊòæÁ§∫Â§áÊ≥®‰ø°ÊÅØÔºâ
            renderUserOrders() {
                const ordersContainer = document.getElementById('ordersContainer');
                const emptyOrders = document.getElementById('emptyOrders');

                if (this.userOrders.length === 0) {
                    if (ordersContainer) ordersContainer.style.display = 'none';
                    if (emptyOrders) emptyOrders.style.display = 'block';
                    return;
                }

                if (ordersContainer) {
                    ordersContainer.style.display = 'block';
                    if (emptyOrders) emptyOrders.style.display = 'none';
                    
                    ordersContainer.innerHTML = '';
                    this.userOrders.forEach(order => {
                        const orderItem = document.createElement('div');
                        orderItem.className = 'user-order-item';
                        
                        // ÁîüÊàêËÆ¢ÂçïÈ°πÁõÆHTMLÔºåÂåÖÂê´Â§áÊ≥®‰ø°ÊÅØ
                        let itemsHTML = '';
                        order.items.forEach(item => {
                            itemsHTML += `
                                <div class="user-order-item-detail">
                                    <div class="user-order-item-name">${item.emoji} ${item.productName} - ${item.flavorName}</div>
                                    <div class="user-order-item-price">¬•${item.price} √ó ${item.quantity}</div>
                                </div>
                            `;
                        });
                        
                        // Â¶ÇÊûúÊúâÂ§áÊ≥®ÔºåÊòæÁ§∫Â§áÊ≥®‰ø°ÊÅØ
                        const notesHTML = order.notes ? `
                            <div style="margin-top: 10px; padding: 10px; background: rgba(255, 107, 107, 0.05); border-radius: 6px; border-left: 3px solid var(--primary-color);">
                                <strong>ËÆ¢ÂçïÂ§áÊ≥®Ôºö</strong>${order.notes}
                            </div>
                        ` : '';

                        orderItem.innerHTML = `
                            <div class="user-order-header">
                                <div class="user-order-number">ËÆ¢ÂçïÂè∑Ôºö${order.id}</div>
                                <div class="user-order-status ${order.status}">
                                    ${order.status === 'pending' ? 'ÂæÖÂ§ÑÁêÜ' : 
                                      order.status === 'processing' ? 'Â§ÑÁêÜ‰∏≠' : 
                                      order.status === 'completed' ? 'Â∑≤ÂÆåÊàê' : 'Êú™Áü•Áä∂ÊÄÅ'}
                                </div>
                            </div>
                            <div class="user-order-items">
                                ${itemsHTML}
                            </div>
                            ${notesHTML}
                            <div class="user-order-footer">
                                <div class="user-order-total">ÊÄªËÆ°Ôºö¬•${order.total}</div>
                                <div class="user-order-time">‰∏ãÂçïÊó∂Èó¥Ôºö${order.time}</div>
                            </div>
                        `;
                        ordersContainer.appendChild(orderItem);
                    });
                }
            },

            // ÂïÜÂÆ∂Á´ØÂäüËÉΩÔºà‰øùÊåÅ‰∏çÂèòÔºâ
            showMerchantPage(page, event) {
                const pages = document.querySelectorAll('.page');
                const navItems = document.querySelectorAll('.nav-item');

                pages.forEach(p => p.classList.remove('active'));
                navItems.forEach(item => item.classList.remove('active'));

                // Â§ÑÁêÜËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ÁöÑÁâπÊÆäID
                const pageId = page === 'orders' ? 'merchantOrdersPage' : page + 'Page';
                document.getElementById(pageId).classList.add('active');
                event.target.classList.add('active');

                if (page === 'orders') {
                    this.renderMerchantOrders();
                } else if (page === 'inventory') {
                    this.renderInventoryTable();
                }
            },

            initMerchantData() {
                this.updateDashboardStats();
                this.renderInventoryTable();
                this.renderMerchantOrders();
            },

            updateDashboardStats() {
                const today = new Date().toDateString();
                const todayOrders = this.userOrders.filter(order => 
                    new Date(order.time).toDateString() === today
                );
                
                const todaySales = todayOrders.reduce((sum, order) => sum + order.total, 0);
                const totalStock = this.products.reduce((sum, product) => sum + product.stock, 0);
                const pendingOrders = this.userOrders.filter(order => order.status === 'pending').length;

                document.getElementById('todaySales').textContent = `¬•${todaySales}`;
                document.getElementById('todayOrders').textContent = todayOrders.length;
                document.getElementById('totalStock').textContent = totalStock;
                document.getElementById('pendingOrders').textContent = pendingOrders;
            },

            renderInventoryTable() {
                const table = document.getElementById('inventoryTable');
                table.innerHTML = '';
                
                this.products.forEach(product => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${product.emoji} ${product.name}</td>
                        <td>${product.stock}</td>
                        <td>¬•${product.price}</td>
                        <td>
                            <button class="small-btn" onclick="app.editProduct(${product.id})">ÁºñËæë</button>
                            <button class="small-btn delete-btn" onclick="app.deleteProduct(${product.id})">Âà†Èô§</button>
                        </td>
                    `;
                    table.appendChild(row);
                });
            },

            renderMerchantOrders() {
                const ordersList = document.getElementById('merchantOrdersList');
                ordersList.innerHTML = '';
                
                this.userOrders.forEach(order => {
                    const orderItem = document.createElement('div');
                    orderItem.className = 'order-item';
                    
                    let itemsHTML = '';
                    order.items.forEach(item => {
                        itemsHTML += `${item.emoji} ${item.productName} - ${item.flavorName} √ó ${item.quantity}<br>`;
                    });
                    
                    // ÂïÜÂÆ∂Á´ØÊòæÁ§∫Â§áÊ≥®‰ø°ÊÅØ
                    const notesHTML = order.notes ? `
                        <div style="margin-top: 5px; font-size: 12px; color: #666;">
                            <strong>Â§áÊ≥®Ôºö</strong>${order.notes}
                        </div>
                    ` : '';

                    orderItem.innerHTML = `
                        <div class="order-header">
                            <div>ËÆ¢ÂçïÂè∑Ôºö${order.id}</div>
                            <div class="order-status ${order.status}">
                                ${order.status === 'pending' ? 'ÂæÖÂ§ÑÁêÜ' : 
                                  order.status === 'accepted' ? 'Â∑≤Êé•Âçï' : 
                                  order.status === 'delivering' ? 'ÈÖçÈÄÅ‰∏≠' : 
                                  order.status === 'completed' ? 'Â∑≤ÂÆåÊàê' : 'Êú™Áü•Áä∂ÊÄÅ'}
                            </div>
                        </div>
                        <div class="order-details">
                            <div><strong>ÂÆ¢Êà∑Ôºö</strong>${order.customer}</div>
                            <div><strong>ÁîµËØùÔºö</strong>${order.phone}</div>
                            <div><strong>Âú∞ÂùÄÔºö</strong>${order.address}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>ÂïÜÂìÅÔºö</strong><br>${itemsHTML}
                        </div>
                        ${notesHTML}
                        <div class="order-actions">
                            <button class="small-btn" onclick="app.updateOrderStatus(${order.id}, 'accepted')">Êé•Âçï</button>
                            <button class="small-btn" onclick="app.updateOrderStatus(${order.id}, 'delivering')">ÈÖçÈÄÅ</button>
                            <button class="small-btn" onclick="app.updateOrderStatus(${order.id}, 'completed')">ÂÆåÊàê</button>
                            <button class="small-btn delete-btn" onclick="app.deleteOrder(${order.id})">Âà†Èô§</button>
                        </div>
                    `;
                    ordersList.appendChild(orderItem);
                });
            },

            updateOrderStatus(orderId, status) {
                const order = this.userOrders.find(order => order.id === orderId);
                if (order) {
                    order.status = status;
                    this.saveOrdersToStorage();
                    this.renderMerchantOrders();
                    this.updateDashboardStats();
                    
                    // Â¶ÇÊûúÁî®Êà∑Á´ØÂΩìÂâçÊ≠£Âú®Êü•ÁúãËÆ¢ÂçïÈ°µÈù¢Ôºå‰πüÊõ¥Êñ∞ÊòæÁ§∫
                    if (document.getElementById('ordersPage').classList.contains('active')) {
                        this.renderUserOrders();
                    }
                }
            },

            deleteOrder(orderId) {
                if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ËÆ¢ÂçïÂêóÔºü')) {
                    this.userOrders = this.userOrders.filter(order => order.id !== orderId);
                    this.saveOrdersToStorage();
                    this.renderMerchantOrders();
                    this.updateDashboardStats();
                }
            },

            addNewProduct() {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                `;
                
                modal.innerHTML = `
                    <div style="background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <h3 style="margin-bottom: 20px; color: var(--text-dark);">Ê∑ªÂä†Êñ∞ÂïÜÂìÅ</h3>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÂêçÁß∞</label>
                            <input type="text" id="newProductName" placeholder="ËØ∑ËæìÂÖ•ÂïÜÂìÅÂêçÁß∞" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>‰ª∑Ê†º</label>
                            <input type="number" id="newProductPrice" placeholder="ËØ∑ËæìÂÖ•‰ª∑Ê†º" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Â∫ìÂ≠òÊï∞Èáè</label>
                            <input type="number" id="newProductStock" placeholder="ËØ∑ËæìÂÖ•Â∫ìÂ≠òÊï∞Èáè" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÊèèËø∞</label>
                            <textarea id="newProductDescription" placeholder="ËØ∑ËæìÂÖ•ÂïÜÂìÅÊèèËø∞" class="form-input" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÂõæÊ†áÔºàEmojiÔºâ</label>
                            <input type="text" id="newProductEmoji" placeholder="‰æãÂ¶ÇÔºöü•ê" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÂõæÁâáURL</label>
                            <input type="text" id="newProductImage" placeholder="ËØ∑ËæìÂÖ•ÂõæÁâáÈìæÊé•ÔºàÂèØÈÄâÔºâ" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÂ§áÊ≥®</label>
                            <textarea id="newProductNotes" placeholder="ËØ∑ËæìÂÖ•ÂïÜÂìÅÂ§áÊ≥®ÔºàÂèØÈÄâÔºâ" class="form-input" rows="2"></textarea>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="save-btn" onclick="app.saveNewProduct()" style="flex: 1;">‰øùÂ≠ò</button>
                            <button class="small-btn" onclick="app.closeEditModal()" style="flex: 1;">ÂèñÊ∂à</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            },
            
            saveNewProduct() {
                const name = document.getElementById('newProductName').value;
                const price = parseFloat(document.getElementById('newProductPrice').value);
                const stock = parseInt(document.getElementById('newProductStock').value);
                const description = document.getElementById('newProductDescription').value;
                const emoji = document.getElementById('newProductEmoji').value || 'üçû';
                const image = document.getElementById('newProductImage').value || 'https://images.unsplash.com/photo-1509440159596-0249088772ff?w=400&h=300&fit=crop&crop=center';
                const notes = document.getElementById('newProductNotes').value || 'Êñ∞ÂìÅ‰∏äÂ∏ÇÔºåÊ¨¢ËøéÂìÅÂ∞ùÔºÅ';
                
                if (!name || !price || !stock || !description) {
                    alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÂïÜÂìÅ‰ø°ÊÅØÔºÅ');
                    return;
                }
                
                // ÁîüÊàêÊñ∞ÁöÑÂïÜÂìÅID
                const newId = Math.max(...this.products.map(p => p.id)) + 1;
                
                // Ê∑ªÂä†Êñ∞ÂïÜÂìÅÂà∞ÂïÜÂìÅÂàóË°®
                this.products.push({
                    id: newId,
                    name: name,
                    description: description,
                    price: price,
                    emoji: emoji,
                    category: 'new',
                    stock: stock,
                    image: image,
                    notes: notes,
                    flavors: [
                        { id: 1, name: name + 'ÔºàÂéüÂë≥Ôºâ', price: price, description: 'ÁªèÂÖ∏ÂéüÂë≥' }
                    ]
                });
                
                // ÈáçÊñ∞Ê∏≤ÊüìÂïÜÂìÅÂàóË°®ÂíåÂ∫ìÂ≠òË°®Ê†º
                this.renderProducts();
                this.renderInventoryTable();
                this.closeAddProductModal();
                
                alert('ÂïÜÂìÅÊ∑ªÂä†ÊàêÂäüÔºÅ');
            },

            editProduct(productId) {
                const product = this.products.find(p => p.id === productId);
                if (!product) return;
                
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                `;
                
                modal.innerHTML = `
                    <div style="background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <h3 style="margin-bottom: 20px; color: var(--text-dark);">ÁºñËæëÂïÜÂìÅ</h3>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÂêçÁß∞</label>
                            <input type="text" id="editProductName" value="${product.name}" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>‰ª∑Ê†º</label>
                            <input type="number" id="editProductPrice" value="${product.price}" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Â∫ìÂ≠òÊï∞Èáè</label>
                            <input type="number" id="editProductStock" value="${product.stock}" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>ÂïÜÂìÅÊèèËø∞</label>
                            <textarea id="editProductDescription" class="form-input" rows="3">${product.description}</textarea>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="save-btn" onclick="app.saveProductEdit(${productId})" style="flex: 1;">‰øùÂ≠ò</button>
                            <button class="small-btn" onclick="app.closeEditModal()" style="flex: 1;">ÂèñÊ∂à</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            },
            
            saveProductEdit(productId) {
                const product = this.products.find(p => p.id === productId);
                if (!product) return;
                
                const name = document.getElementById('editProductName').value;
                const price = parseFloat(document.getElementById('editProductPrice').value);
                const stock = parseInt(document.getElementById('editProductStock').value);
                const description = document.getElementById('editProductDescription').value;
                
                if (!name || !price || !stock) {
                    alert('ËØ∑Â°´ÂÜôÂÆåÊï¥‰ø°ÊÅØÔºÅ');
                    return;
                }
                
                product.name = name;
                product.price = price;
                product.stock = stock;
                product.description = description;
                
                this.renderProducts();
                this.renderInventoryTable();
                this.closeEditModal();
                
                alert('ÂïÜÂìÅ‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞ÔºÅ');
            },
            
            closeEditModal() {
                // Á≤æÁ°ÆÊü•ÊâæÊâÄÊúâÊ®°ÊÄÅÊ°ÜÂπ∂ÁßªÈô§
                const modals = document.querySelectorAll('div');
                for (let modal of modals) {
                    if (modal.style && 
                        modal.style.position === 'fixed' && 
                        modal.style.top === '0px' && 
                        modal.style.left === '0px' &&
                        modal.style.width === '100%' &&
                        modal.style.height === '100%' &&
                        modal.style.backgroundColor === 'rgba(0, 0, 0, 0.5)') {
                        modal.remove();
                        break;
                    }
                }
            },
            
            closeAddProductModal() {
                // ‰∏ìÈó®Áî®‰∫éÂÖ≥Èó≠Ê∑ªÂä†Êñ∞ÂïÜÂìÅÊ®°ÊÄÅÊ°Ü
                const modals = document.querySelectorAll('div');
                for (let modal of modals) {
                    if (modal.innerHTML && 
                        (modal.innerHTML.includes('Ê∑ªÂä†Êñ∞ÂïÜÂìÅ') || 
                         modal.innerHTML.includes('ÁºñËæëÂïÜÂìÅ'))) {
                        modal.remove();
                        break;
                    }
                }
            },

            deleteProduct(productId) {
                if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÂïÜÂìÅÂêóÔºü')) {
                    this.products = this.products.filter(product => product.id !== productId);
                    this.renderProducts();
                    this.renderInventoryTable();
                }
            },

            // ÁªìÁÆóÂäüËÉΩ
            checkout() {
                // ÂàáÊç¢Âà∞‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ËøõË°åËÆ¢ÂçïÊèê‰∫§
                this.showPage('profile');
                // ÊªöÂä®Âà∞È°∂ÈÉ®
                window.scrollTo(0, 0);
            },

            // Êú¨Âú∞Â≠òÂÇ®Áõ∏ÂÖ≥
            saveCartToStorage() {
                localStorage.setItem('breadShopCart', JSON.stringify(this.cart));
            },

            loadCartFromStorage() {
                const savedCart = localStorage.getItem('breadShopCart');
                if (savedCart) {
                    this.cart = JSON.parse(savedCart);
                    this.updateCartDisplay();
                }
            },

            saveOrdersToStorage() {
                localStorage.setItem('breadShopOrders', JSON.stringify(this.userOrders));
            },

            loadOrdersFromStorage() {
                const savedOrders = localStorage.getItem('breadShopOrders');
                if (savedOrders) {
                    this.userOrders = JSON.parse(savedOrders);
                }
            },

            // Â∫ìÂ≠òÊï∞ÊçÆÊåÅ‰πÖÂåñ
            saveProductsToStorage() {
                localStorage.setItem('breadShopProducts', JSON.stringify(this.products));
            },

            loadProductsFromStorage() {
                const savedProducts = localStorage.getItem('breadShopProducts');
                if (savedProducts) {
                    this.products = JSON.parse(savedProducts);
                }
            }
        };

        // ÂàùÂßãÂåñÂ∫îÁî®
        document.addEventListener('DOMContentLoaded', function() {
            app.init();
        });
    </script>
</body>
</html>